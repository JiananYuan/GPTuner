<img align='right' src="/assets/gptuner.png" alt="GPTuner logo" width="130">

# GPTuner: A Manual-Reading Database Tuning System via GPT-Guided Bayesian Optimization

- This repository hosts the source code and supplementary materials for our VLDB 2024 submission, "GPTuner: A Manual-Reading Database Tuning System via GPT-Guided Bayesian Optimization". 
- GPTuner collects and refines heterogeneous domain knowledge, unifies a structured view of the refined knowledge, and uses the knowlege to (1) select important knobs, (2) optimize the value range of each knob and (3) explore the optimized space with a novel Coarse-to-Fine Bayesian Optimization Framework.


## System Overview

<img src="/assets/gptuner_overview.png" alt="GPTuner overview" width="800">

**GPTuner** is a manual-reading database tuning system to suggest satisfactory knob configurations with reduced tuning costs. The figure above presents the tuning workflow that involves seven steps:
1. ðŸ“Œ User provides the DBMS to be tuned (e.g., PostgreSQL or MySQL), the target workload, and the optimization objective (e.g., latency or throughput).
2. ðŸ“Œ GPTuner collects and refines the heterogeneous knowledge from different sources (e.g., GPT-4, DBMS manuals, and web forums) to construct _Tuning Lake_, a collection of DBMS tuning knowledge.
3. ðŸ“Œ GPTuner unifies the refined tuning knowledge from _Tuning Lake_ into a structured view accessible to machines (e.g., JSON).
4. ðŸ“Œ GPTuner reduces the search space dimensionality by selecting important knobs to tune (i.e., fewer knobs to tune means fewer dimensions).
5. ðŸ“Œ GPTuner optimizes the search space in terms of the value range for each knob based on structured knowledge.
6. ðŸ“Œ GPTuner explores the optimized space via a novel Coarse-to-Fine Bayesian Optimization framework.
7. ðŸ“Œ Finally, GPTuner identifies satisfactory knob configurations within resource limits (e.g., the maximum optimization time or iterations specified by users).

## Code Structure

.
â”œâ”€â”€ configs
â”‚ â”œâ”€â”€ postgres.ini
â”‚ â””â”€â”€ mysql.ini
â”œâ”€â”€ optimization_results
â”‚ â”œâ”€â”€ temp_results
â”‚ â”œâ”€â”€ postgres
â”‚ â”‚ â”œâ”€â”€ coarse
â”‚ â”‚ â””â”€â”€ fine
â”‚ â””â”€â”€ mysql
â”œâ”€â”€ scripts
â”‚ â”œâ”€â”€ install_benbase.sh
â”‚ â”œâ”€â”€ build_benchmark.sh
â”‚ â”œâ”€â”€ recover_postgres.sh
â”‚ â””â”€â”€ recover_mysql.sh
â”œâ”€â”€ knowledge_collection
â”‚ â”œâ”€â”€ postgres
â”‚ â”‚ â”œâ”€â”€ target_knobs.txt
â”‚ â”‚ â”œâ”€â”€ knob_info
â”‚ â”‚ â”‚ â”œâ”€â”€ system_view.json
â”‚ â”‚ â”‚ â””â”€â”€ official_document.json
â”‚ â”‚ â”œâ”€â”€ knowledge_sources
â”‚ â”‚ â”‚ â”œâ”€â”€ gpt
â”‚ â”‚ â”‚ â”œâ”€â”€ manual
â”‚ â”‚ â”‚ â”œâ”€â”€ web
â”‚ â”‚ â”‚ â””â”€â”€ dba
â”‚ â”‚ â”œâ”€â”€ tuning_lake
â”‚ â”‚ â””â”€â”€ structured_knowledge
â”‚ â”‚ â”œâ”€â”€ special
â”‚ â”‚ â””â”€â”€ normal
â”‚ â””â”€â”€ mysql
â”œâ”€â”€ example_pool
â””â”€â”€ src
â”œâ”€â”€ dbms
â”‚ â”œâ”€â”€ dbms_template.py
â”‚ â”œâ”€â”€ postgres.py
â”‚ â””â”€â”€ mysql.py
â”œâ”€â”€ knowledge_handler
â”‚ â”œâ”€â”€ knowledge_preparation.py
â”‚ â””â”€â”€ knowledge_transformation.py
â”œâ”€â”€ space_optimizer
â”‚ â”œâ”€â”€ knob_selection.py
â”‚ â”œâ”€â”€ default_space.py
â”‚ â”œâ”€â”€ coarse_space.py
â”‚ â””â”€â”€ fine_space.py
â”œâ”€â”€ config_recommender
â”‚ â”œâ”€â”€ workload_runner.py
â”‚ â”œâ”€â”€ coarse_stage.py
â”‚ â””â”€â”€ fine_stage.py
â””â”€â”€ run_gptuner.py